# Edge 安全性

EnOS Edge作为EnOS的一部分，完全遵循EnOS的安全标准和统一防护规则，从硬件设备本身安全，与云端通讯，证书加密，访问控制等几个方面实现安全性控制。

## Edge设备

Edge作为一个软盒子，可以安装到不同的符合条件的硬件上，EnOS Edge具有内置的固件/软件升级特性，以实现手动或自动升级关键安全漏洞补丁。应用于Edge的任何更改或固件/软件升级都将在云端记录以进行后续审核。

未使用的USB端口会被默认禁用以防止恶意访问。网络策略仅允许启用必要的应用程序和服务使用的网络端口。

对于具备TPM芯片的硬件，Edge支持使用TPM进行加密，可以利用这个硬件特性安全地存储客户端证书。 由TPM芯片生成的rsa公私钥，私钥存放于TPM芯片中，私钥的标记和公钥存放于相关文件中，私钥永远无法从TPM芯片取出，也就是说只有利用本机的TPM芯片配合相关文件才能对加密的文件进行解密，具有极高的安全性。


## 与EnOS云端通讯

Edge设备如果需要与云端通讯，需要先在云端进行预注册，每台Edge设备都有一个唯一的身份密钥，EnOS云端可以在Edge运行时使用该密钥与它通信。该身份密钥与用户自定义的Edge ID组成了与云端通信时需要的令牌和签名的基础。Edge ID可以是现成的固定标识，例如设备序列号、网络MAC地址等不容易更改的标识。Edge ID由EnOS云端的边缘设备接入器通过EnOS控制台或API接口管理。EnOS云端为Edge ID和密钥提供安全的存储保障。

Edge与EnOS云端通过TLS保护的数据通道进行通信。每个会话都强制执行X.509基于证书的双向认证。为了确保每个Edge设备具有其独有的客户端证书，证书请求由Edge设备在其第一次开机时执行。Edge设备根据PKI标准生成公钥证书请求，其中包含唯一的设备标识符（序列号或网络MAC地址）和相应的私钥。证书请求被转发到EnOS认证服务或受公众信任的CA进行签名。之后，下发的公钥证书将被发送回Edge设备，与私钥一起存储于本地。

为了确保从设备和终端用户到EnOS云端的安全连接，数据传输时应用TLS协议，通过使用公钥加密来防止窃听、篡改和伪造数据。

设备和终端用户调用EnOS提供的API接口时，是基于HTTPS协议来调用的。设备与EnOS云端之间的TLS保护数据通道，采用X.509基于证书的双向认证，所有数据传输时都经过加密。


## 访问控制

Edge用户访问权限统一放到EnOS云端，与云端一起进行用户访问权限控制，同时在Edge中提供日志审计的功能，所有用户的操作和变更记录都将记录在Edge的审计日志中并上传到云端，以便后期进行追踪和审核。



